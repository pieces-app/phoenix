![](https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb738f94da42b777574e4_markdoc_0d265e06587d59d3892a20d671cce1ad_2000.jpeg)
"nextjs-bf; blog; tutorial"
# Use Markdoc and Next.js to Build a Git-powered Markdown Blog
> Wed Apr 05 2023 16:53:15 GMT+0000 (Coordinated Universal Time)
<figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="Get Started with Markdoc and Next.js." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da428117574e7_ezgif_com-webp-to-png_455d54acb05ef04816809bdcfb05321c_800.jpeg"><div.new.line><figure.new.line><p>Most modern developer blogs and documentation websites have one thing in common— they run on JAMstack (static websites) and their content is file-based and powered by Git. This allows multiple developers to collaboratively edit content with perks like versioning and version control. In this tutorial, we’re going to see how we can build a simple yet powerful and interactive blog with <u><a href="https://nextjs.org/" target="_blank" rel="noopener noreferrer">Next.js</a></u> and <u><a href="https://markdoc.dev/" target="_blank" rel="noopener noreferrer">Markdoc</a></u>.<p.new.line><h2 id="89l06">A Brief Overview of the Article<h2.new.line><p>This tutorial will cover how we can leverage modern tools and frameworks to build a fast &amp; performant blog without relying on a backend to manage our content.<p.new.line><p>We’ll look into Next.js, its features, and why it’s important. We&#x27;ll then take a look at tools like Markdoc that we can use to author and render markdown content into pages for blogs and documentation sites.<p.new.line><p>We’ll also explore the pros and cons of this approach to building static blogs and documentation websites.<p.new.line><p>Let’s get right into it!<p.new.line><h2 id="6jm4v">A Introduction to the Stack<h2.new.line><p>Let’s take a quick look at the tech stack we’ll be working with in this article.<p.new.line><h3 id="5ie1n">JAMstack<h3.new.line><p><a href="https://jamstack.org/" target="_blank" rel="noopener noreferrer">JAMStack</a> is an acronym for JavaScript API and Markup Stack. It&#x27;s basically the way modern sites are built using tools like static site generators that can generate static content that is served over the internet. JavaScript is used for functionality and APIs are used to provide data.<p.new.line><p>For the past few years, since JAMstack became widespread, it has revolutionized the way many websites are built. <u><a href="https://code.pieces.app/blog/best-jamstack-frameworks-for-developing-static-and-dynamic-sites" target="_blank" rel="noopener noreferrer">JAMstack sites</a></u> are fast and performant due to their static nature.<p.new.line><p>In order to provide content, APIs are used. These APIs can be called at build time during the static generation to provide content that will be sent to the client, but this is not the only way we can provide content.<p.new.line><p>We can use template files like Markdown to create content or even pages for our site using static site generators.<p.new.line><h3 id="8n72e">Next.js<h3.new.line><p>According to <u><a href="https://jamstack.org/generators/next/" target="_blank" rel="noopener noreferrer">Jamstack.org</a></u>, Next.js is a minimalistic framework for server-rendered React applications as well as statically exported React apps.<p.new.line><p>Since Next.js offers both Server Side Rendering (SSR) and Static Site Generation (SSG), it’s a great choice for building fast applications.<p.new.line><h3 id="8civ1">Markdoc &amp; File/Git-based content<h3.new.line><p>According to <a href="https://markdoc.dev/docs/getting-started" target="_blank" rel="noopener noreferrer">the official docs</a>, Markdoc is a Markdown-based document format and a framework for publishing content. It was designed at Stripe to meet the needs of their user-facing<a href="http://stripe.com/docs" target="_blank" rel="noopener noreferrer"> <u>product documentation</u></a>. Markdoc extends Markdown with a<a href="https://markdoc.dev/docs/syntax" target="_blank" rel="noopener noreferrer"> <u>custom syntax</u></a> for tags and annotations, providing a way to tailor content to individual users and introduce interactive elements.<p.new.line><p>With Markdoc, we can manage our content in markdown files and provide it to the frontend at build time without a database.<p.new.line><p>The Markdoc syntax is a superset of Markdown. This features markdown syntax with a few extensions to the syntax, such as tags and annotations.<p.new.line><p>Markdoc features several core concepts which include:<p.new.line><ul><li><strong>Nodes: </strong>These are the elements that Markdoc inherits from Markdown.<li.new.line><li><strong>Tags: </strong>Tags are the main syntactic extension that Markdoc adds on top of Markdown. Similar to HTML, each tag is enclosed with <code>{%</code> and <code>%}</code> and includes the tag name, attributes, and content.<li.new.line><li><strong>Annotations: </strong>These can be added to nodes to customize how they are rendered.<li.new.line><ul.new.line><p>You can always view the full list of core concepts in the<a href="https://markdoc.dev/docs/syntax" target="_blank" rel="noopener noreferrer"> <u>syntax docs</u></a>.<p.new.line><h2 id="39f2">What We’re Building with Next.js and Markdoc<h2.new.line><p>We will be building a simple markdown-powered Next.js blog using Markdoc.<p.new.line><p>You can find the final result here: <u><a href="https://markdoc-app.vercel.app/" target="_blank" rel="noopener noreferrer">https://markdoc-app.vercel.app/</a></u><p.new.line><h3 id="fs3ac">Prerequisites<h3.new.line><p>To follow along, you should have:<p.new.line><ul><li>A basic understanding of JavaScript, React, and <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener noreferrer"> <u>Markdown syntax</u></a><li.new.line><li><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer"><u>Node.js</u> <u>(latest LTS version)</u></a><li.new.line><li><u><a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Visual Studio Code</a></u><li.new.line><ul.new.line><h3 id="9j3q8">Seting up Next.js with Markdoc<h3.new.line><p>Let’s follow<a href="https://nextjs.org/docs#automatic-setup" target="_blank" rel="noopener noreferrer"> <u>the steps to build a Next.js app</u></a>.<p.new.line><p>First, navigate to the folder of choice and run the command:<p.new.line><pre>npx create-next-app@latest<br># or<br>yarn create next-app<br># or<br>pnpm create next-app</pre><p>Once installed, navigate to the newly created directory to install the Markdoc package. We’ll be installing <code>@markdoc/next.js</code> and <code>@markdoc/markdoc</code>:<p.new.line><pre>cd &lt;name of app&gt;<br>npm install @markdoc/next.js @markdoc/markdoc</pre><p>Next, we update our <code>next.config.js</code><p.new.line><pre>const withMarkdoc = require(&#x27;@markdoc/next.js&#x27;);<br><br>module.exports = withMarkdoc(/*<a href="https://markdoc.dev/docs/nextjs#options"> <u>options</u></a> */)({<br> pageExtensions: [&#x27;md&#x27;, &#x27;mdoc&#x27;, &#x27;js&#x27;, &#x27;jsx&#x27;, &#x27;ts&#x27;, &#x27;tsx&#x27;]<br>});</pre><p>Also, we’ll set up TailwindCSS and Tailwind Typography to style our application. To do that, we’ll follow the steps in the<a href="https://tailwindcss.com/docs/guides/nextjs" target="_blank" rel="noopener noreferrer"> <u>Tailwind docs</u></a>.<p.new.line><p>Install <code>tailwindcss</code> and its peer dependencies via <code>npm</code>, and then run the <code>init</code> command to generate both <code>tailwind.config.js</code> and <code>postcss.config.js</code>.<p.new.line><pre>npm install -D tailwindcss postcss autoprefixer @tailwindcss/typography<br>npx tailwindcss init -p</pre><p>Add the paths to all of our template files in your <code>tailwind.config.js</code> file. We’ll also add the Tailwind typography plugin:<p.new.line><pre><em>// ./tailwind.config.js<br>/** @type {import(&#x27;tailwindcss&#x27;).Config} */<br></em>module.exports = {<br> content: [<br>  &quot;./pages/**/*.{js,ts,jsx,tsx}&quot;,<br>  &quot;./components/**/*.{js,ts,jsx,tsx}&quot;,<br>  &quot;./layouts/**/*.{js,ts,jsx,tsx}&quot;,<br>],<br>theme: {<br>  extend: {},<br> },<br> plugins: [require(&quot;@tailwindcss/typography&quot;)],<br>};</pre><p>Add the <code>@tailwind</code> directives for each of Tailwind’s layers to your <code>./styles/globals.css</code> file.<p.new.line><pre>// ./styles/globals.css<br><br>@tailwind base;<br>@tailwind components;<br>@tailwind utilities;</pre><p><em>To keep this tutorial short, the styling that will be applied to this application can be accessed on<a href="https://github.com/miracleonyenma/markdoc-app/blob/main/styles/globals.css" target="_blank" rel="noopener noreferrer"> <u>GitHub</u></a>. You can copy the contents and enter them in your <code>./styles.globals.css</code> file.</em><p.new.line><h2 id="7lfcr">Creating our First Post<h2.new.line><p>Create a new .md file within /pages/articles and name it getting-started.md:<p.new.line><pre>---<br>title: Get started with Markdoc<br>description: How to get started with Markdoc<br>---<br># Get started with Markdoc</pre><p>Now, if we simply start the development server with the following command:<p.new.line><pre>npm run dev</pre><p>We should have something like the image below when we navigate to <code>/articles/getting-started/</code>.<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="The initial Markdoc project viewed in the browser. " src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da413097574ea_image11_30057ec79a7ac3e33c4ac289835f8f2c_800.png"><div.new.line><figure.new.line><p>Here, we can see that the content of our markdown file has been rendered, but it’s pretty bare.<p.new.line><p>We need to display the data (i.e., the <code>title</code> and <code>description</code>) included in the front matter of the <code>.md</code> file:<p.new.line><pre>---<br>title: Get started with Markdoc<br>description: How to get started with Markdoc<br>---</pre><p>The front matter data will be displayed on the article page and also added to the site’s metadata. In the following sections, we’ll cover how we can achieve that.<p.new.line><h2 id="a5k74">Creating a SiteHeader Component<h2.new.line><p>First, we have to create a global site header component which will be included in our layouts.<p.new.line><p>Create a new file— <code>./components/SiteHeader.jsx</code>:<p.new.line><pre><em>// ./components/SiteHeader.jsx<br></em>const { default: Link } = require(&quot;next/link&quot;);<br>const SiteHeader = () =&gt; {<br>  return (<br>    &lt;header className=&quot;site-header&quot;&gt;<br>      &lt;div className=&quot;wrapper&quot;&gt;<br>        &lt;Link href={&quot;/&quot;}&gt;<br>          &lt;figure title=&quot;Site header&quot;&gt;<br>            &lt;h1&gt;My site&lt;/h1&gt;<br>          &lt;/figure&gt;<br>        &lt;/Link&gt;<br>        &lt;nav className=&quot;site-nav&quot;&gt;<br>          &lt;ul className=&quot;links&quot;&gt;<br>            &lt;li className=&quot;link&quot;&gt;<br>          &lt;Link href={&quot;/articles&quot;}&gt;Articles&lt;/Link&gt;<br>        &lt;/li&gt;<br>       &lt;/ul&gt;<br>     &lt;/nav&gt;<br>   &lt;/div&gt;<br> &lt;/header&gt;<br> );<br>};<br><br>export default SiteHeader;</pre><p>Next, we’ll create our layouts.<p.new.line><h2 id="7v5hu">Creating a SiteLayout in Markdoc<h2.new.line><p>The <code>&lt;SiteLayout /&gt;</code> layout component will be responsible for displaying all pages that are not rendered by Markdoc. We’ll also create another <code>&lt;ArticleLayout /&gt;</code> component which will be responsible for displaying pages rendered by Markdoc, e.g., <code>.md</code> files.<p.new.line><p>Now, let’s create the layout. Create a new file <code>./layouts/SiteLayout.jsx</code>:<p.new.line><pre><em>// ./layouts/SiteLayout.jsx<br></em>const { default: SiteHeader } = require(&quot;../components/SiteHeader&quot;);<br>const SiteLayout = ({ children }) =&gt; {<br>  return (<br>   &lt;&gt;<br>    &lt;SiteHeader /&gt;<br>    &lt;main&gt;{children}&lt;/main&gt;<br>   &lt;/&gt;<br>  );<br>};<br><br>export default SiteLayout;</pre><h2 id="c2r36">Creating ArticleLayouts<h2.new.line><p>Create a new file— <code>./layouts/ArticleLayout.jsx</code>:<p.new.line><pre><em>// ./layouts/ArticleLayout.jsx<br><br></em>import Head from &quot;next/head&quot;;<br>import SiteHeader from &quot;../components/SiteHeader&quot;;<br><br>const ArticleLayout = ({ markdoc, children }) =&gt; {<br>  const { title, description } = markdoc?.frontmatter;<br>  return (<br>   &lt;&gt;<br>    &lt;Head&gt;<br>     &lt;title&gt;{title}&lt;/title&gt;<br>     &lt;meta name=&quot;description&quot; content={description} /&gt;<br>    &lt;/Head&gt;<br>    &lt;SiteHeader /&gt;<br>    &lt;article className=&quot;site-article&quot;&gt;<br>     &lt;div className=&quot;wrapper&quot;&gt;<br>      &lt;header className=&quot;article-header&quot;&gt;<br>       &lt;div className=&quot;wrapper&quot;&gt;<br>        &lt;h1 className=&quot;font-extrabold text-6xl&quot;&gt;{title}&lt;/h1&gt;<br>        &lt;p className=&quot;text-2xl&quot;&gt;{description}&lt;/p&gt;<br>       &lt;/div&gt;<br>      &lt;/header&gt;<br>      &lt;div className=&quot;article-content prose&quot;&gt;{children}&lt;/div&gt;<br>     &lt;/div&gt;<br>    &lt;/article&gt;<br>   &lt;/&gt;<br>  );<br>};<br><br>export default ArticleLayout;</pre><p>Here, we have <code>markdoc</code> as a prop in this component. With that, we get <code>title</code> and <code>description</code> by destructuring.<p.new.line><p>Using the Next.js <code>&lt;Head&gt;</code> component, we add the <code>title</code> and <code>description</code> to our page meta.<p.new.line><p>To display the data within the page, we add it to the <code>.article-header</code> element.<p.new.line><p>Finally, to display the actual markdown content, we pass <code>children</code> to the <code>article-content.prose</code> element.<p.new.line><p>Now that we have created these components, let’s see how we can add them to our application.<p.new.line><h2 id="1deho">Setting up Dynamic Layouts in Next.js<h2.new.line><p>So far, we’ve created two different layouts for our application. We want to display the <code>&lt;SiteLayout /&gt;</code> component on normal pages while we use the <code>&lt;ArticleLayout /&gt;</code> component on article pages, that is, pages rendered with Markdoc.<p.new.line><p>Next.js allows us to define layouts on a <em>per-page basis </em>by adding the <code>getLayout</code> property to our page.<p.new.line><p>Since we cannot easily add a <code>getLayout</code> property to a <code>.md</code> file to define which layout will be used for the page, we can define a default layout for such pages. Then <code>.js</code> pages can define their layouts using the <code>getLayout</code> property.<p.new.line><p>To get this working, we’ll modify our <code>./pages/_app.js</code> file:<p.new.line><pre><em>// ./pages/_app.js<br></em>import ArticleLayout from &quot;../layouts/ArticleLayout&quot;;<br>import &quot;../styles/globals.css&quot;;<br><br>function MyApp({ Component, pageProps }) {<br> <em>// configure default article layout<br> </em>const articleLayout = (page) =&gt; {<br>  <em>// pass &#x60;markdoc&#x60; props to ArticleLayout<br>  </em>return (<br>   page.props.markdoc &amp;&amp; (<br>    &lt;ArticleLayout markdoc={page.props.markdoc}&gt; {page}&lt;/ArticleLayout&gt;<br>   )<br>  );<br>};<br><br><em>// Use the layout defined at the page level, if available<br></em>const getLayout = Component.getLayout || articleLayout;<br><br>  return getLayout(&lt;Component {...pageProps} /&gt;);<br>}<br><br>export default MyApp;</pre><p>In order to make <code>&lt;ArticleLayout /&gt;</code> the default layout, we create a function <code>articleLayout()</code> which accepts page as a parameter. Within this function, we return the <code>&lt;ArticleLayout /&gt;</code> component while passing the <code>page</code> and <code>markdoc</code> props.<p.new.line><p>Next, we initialize <code>getLayout</code> and assign the layout defined in <code>Component</code> (the current page) or <code>articleLayout</code> if the page does not define a layout.<p.new.line><p>Now that we’ve set up dynamic layouts in our application, let’s define the layout for our home page(<code>./pages/index.js</code>):<p.new.line><pre><em>// ./pages/index.js<br></em>import Head from &quot;next/head&quot;;<br>import styles from &quot;../styles/Home.module.css&quot;;<br>import SiteLayout from &quot;../layouts/SiteLayout&quot;;<br>export default function Home() {<br>  return (<br>   &lt;div className={styles.container}&gt;<br>    &lt;Head&gt;<br>     &lt;title&gt;My Site&lt;/title&gt;<br>     &lt;meta name=&quot;description&quot; content=&quot;This is my Next.js site&quot; /&gt;<br>     &lt;link rel=&quot;icon&quot; href=&quot;/favicon.ico&quot; /&gt;<br>    &lt;/Head&gt;<br>    &lt;section&gt;<br>     &lt;header className=&quot;flex flex-col items-center justify-center min-h-screen&quot;&gt;<br>      &lt;h1 className=&quot;font-extrabold text-7xl&quot;&gt;Welcome to my site&lt;/h1&gt;<br>      &lt;p className=&quot;text-2xl&quot;&gt;I&amp;apos;m glad you&amp;apos;re here&lt;/p&gt;<br>     &lt;/header&gt;<br>    &lt;/section&gt;<br>   &lt;/div&gt;<br>  );<br>}<br><em>// define layout for home page<br></em>Home.getLayout = (page) =&gt; {<br>  return &lt;SiteLayout&gt; {page} &lt;/SiteLayout&gt;;<br>};</pre><p>Now, if we go to <code>http://localhost:3000</code>  in our browser, we should have something like this:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A browser window with a site landing page that reads, &quot;Welcome to my site. I&#39;m glad you&#39;re here.&quot;" src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da4adc97574e8_image9_cc492533c3ee7246105a654503cd7fd5_800.png"><div.new.line><figure.new.line><p>Also, if we go to <code>http://localhost:3000/articles/getting-started</code>, we should see our content with the heading contained in the front matter:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A styled homepage for a website about using Markdoc." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da490d37574e9_image1_84c335582a015b972b8585b2a2f89f2f_800.png"><div.new.line><figure.new.line><h2 id="2iubh">Building out the Blog<h2.new.line><p>In the following sections, we’ll gradually build out our blog while exploring some of Mardoc’s features.<p.new.line><p>We’ll cover how to add custom components using tags, customize nodes, create functions, and more.<p.new.line><h3 id="dsdjd">Markdoc syntax<h3.new.line><p>The Markdoc syntax is built on Markdown with a few additions or extensions to the syntax including nodes, tags, functions, and annotations; we’ve talked a bit about this in previous sections and you can learn all about it<a href="https://markdoc.dev/docs/syntax" target="_blank" rel="noopener noreferrer"> <u>in their docs</u></a>.<p.new.line><h3 id="e5ou0">Creating Custom Tags &amp; Attributes<h3.new.line><p>According to the Markdoc docs, tags are the main syntactic extension that Markdoc adds on top of Markdown. Each tag is enclosed with <code>{%</code> and <code>%}</code>, and includes the tag name,<a href="https://markdoc.dev/docs/syntax#attributes" target="_blank" rel="noopener noreferrer"> <u>attributes</u></a>, and the content body.<p.new.line><p>Markdoc comes out-of-the-box with four built-in tags: <code>if</code>, <code>else</code>, <code>table</code>, and <code>partial</code>. However, we can also create custom tags of our own. To illustrate this, we’ll create a custom <code>infobox</code> tag.<p.new.line><p>First, we can create the component that will be rendered. Create a new file, <code>./components/Infobox.jsx</code>:<p.new.line><pre><em>// ./components/Infobox.jsx<br><br></em>const Infobox = ({ type, title, children }) =&gt; {<br>  return (<br>   &lt;div className={&#x60;info-box ${type}&#x60;}&gt;<br>    &lt;details&gt;<br>     &lt;summary&gt;{title}&lt;/summary&gt;<br>     &lt;div&gt;{children}&lt;/div&gt;<br>    &lt;/details&gt;<br>   &lt;/div&gt;<br>  );<br>};<br><br>export default Infobox;</pre><p>Here, we dynamically include the type value in the element class. This way, we can define styles for the <code>.info-box</code> element depending on the type.<p.new.line><h3 id="bh8pu">Creating a Custom Infobox<h3.new.line><p>Next, we’ll create a custom <code>infobox</code> tag definition in our Markdoc schema by creating a new file, <code>./markdoc/tags/infobox.markdoc.js</code>:<p.new.line><pre><em>// ./markdoc/tags/infobox.markdoc.js<br></em>import Infobox from &quot;../../components/Infobox&quot;;<br><br>export const infobox = {<br>  render: Infobox,<br>  attributes: {<br>   type: {<br>    type: String,<br>    default: &quot;info&quot;,<br>    matches: [&quot;warning&quot;, &quot;info&quot;, &quot;error&quot;],<br>   },<br>   title: {<br>    type: String,<br>   },<br>  },<br>};</pre><p>Here, in our <code>infobox</code> declaration, we import and define the component that will be rendered with the <code>render</code> property.<p.new.line><p>We also define the attributes that our tag accepts using the <code>attributes</code> property and they include <code>type</code> and <code>title</code>.<p.new.line><p>For the <code>type</code> attribute, we defined the type of value it accepts, the default value (<code>&#x27;info&#x27;</code>) and other acceptable matches, including <code>&#x27;warning&#x27;</code> and <code>&#x27;error&#x27;</code>.<p.new.line><p>Next, we will create a <code>./markdoc/tags/index.js</code> file to<em> </em>export our Markdoc tags:<p.new.line><pre><em>// ./markdoc/tags/index.js<br>/* Use this file to export your markdoc tags */<br></em>export * from &#x27;./infobox.markdoc&#x27;;</pre><p>Great! With that, we can add our <code>infobox</code> to our Markdoc document. Back in <code>./pages/articles/getting-started.md</code>, we’ll add some more content with our new infobox tag:<p.new.line><pre>---<br><em>title</em>: <em>Get started with Markdoc<br>description</em>: <em>How to get started with Markdoc<br></em>---<br>## Get started with Markdoc<br>Markdoc is a static site generator that uses Markdown files as input and outputs HTML files.<br>Markdoc features several core concepts which include:<br>- <strong>**Nodes**</strong>:<br> These are the elements that Markdoc inherits from Markdown<br>- <strong>**Tags**</strong>:<br> Tags are the main syntactic extension that Markdoc adds on top of Markdown.   Similar to HTML, each tag is enclosed with &#x60;{%&#x60; and &#x60;%}&#x60; and includes the tag name, attributes, and the content body.<br>- <strong>**Annotations**</strong>:<br> These can be added to nodes to customize how they are rendered<br>### Installation<br>To install markdoc in Next.js, run the following command:<br>&#x60;&#x60;&#x60;bash<br>npm install @markdoc/next.js @markdoc/markdoc<br>&#x60;&#x60;&#x60;<br>### Background<br>Markdoc was built by [Stripe](https://stripe.com/) to power their developer documentation.<br><br>{%infobox title=&quot;Hey there!&quot; type=&quot;info&quot;%}<br>Here&#x27;s some info for you!<br>{%/infobox%}<br><br>{%infobox title=&quot;Hey there!&quot; type=&quot;warning&quot;%}<br>Here&#x27;s a warning for you!<br>{%/infobox%}<br><br>{%infobox title=&quot;Hey there!&quot; type=&quot;error&quot;%}<br>Here&#x27;s an error for you!<br>{%/infobox%}</pre><p>Here, in the <code>{% infobox %}</code> tag, we define the title and type attributes for each. When we run the app, we should see something like this:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A webpage built with Markdoc with three dropdown information sections. " src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da4604f7574eb_image6_29d7c927532ebb2c26bb9ba823cb6b07_800.png"><div.new.line><figure.new.line><p>Sweet! With custom Markdoc tags, we’re able to add components that can do just about anything to our <code>.md</code> files.<p.new.line><h3 id="6kk31">Customizing Default Nodes in Markdoc<h3.new.line><p>Next, we’ll be looking at how to customize Nodes. To illustrate this, we’ll be customizing the default blockquote node.<p.new.line><p>First, we create a new <code>Blockquote</code> component that will be used. Create a new file: <code>./components/Blockquote.jsx</code><p.new.line><pre><em>// ./components/Blockquote.jsx<br></em>const Blockquote = ({ children }) =&gt; {<br>  return &lt;blockquote className=&quot;blockquote&quot;&gt;{children}&lt;/blockquote&gt;;<br>};<br>export default Blockquote;<br><br>Create a new file: ./markdoc/nodes.js<br><br><em>// ./markdoc/nodes.js<br></em>import Blockquote from &quot;../components/Blockquote&quot;;<br>export const blockquote = {<br>  render: Blockquote,<br>  attributes: {<br>   author: {<br>    type: String,<br>  },<br> }<br>}</pre><p>Now, by styling the <code>.blockquote</code> class that was attached to the <code>&lt;Blockquote /&gt;</code> component, we can add the following to our article:<p.new.line><pre>&gt; Is there such an element as a &quot;blockquote&quot;?</pre><p>And have something like this:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A webpage with three dropdown sections and a blockquote." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da40b0f7574ed_image3_25f44a953623e3a2795d57da9b8d979f_800.png"><div.new.line><figure.new.line><p>Now we’ve seen how to customize a node with a custom component. In the next section, we’ll take a look at another handy Markdoc feature, Partials, and how we can use variables in Markdoc.<p.new.line><h3 id="1tq2c">Variables and Partials in Markdoc<h3.new.line><p>Variables allow us to customize your Markdoc documents at runtime. Variables are accessed using the <code>$</code> symbol.<p.new.line><p>You can pass variables in a few ways:<p.new.line><ul><li>Through the <code>variables</code> field on the<a href="https://markdoc.dev/docs/syntax#config" target="_blank" rel="noopener noreferrer"> <code><u>Config</u></code></a> object. Also, the frontmatter of a Markdoc page can be accessed via the <code>$markdoc</code> variable in the document.<li.new.line><li>If we add the following to our document:<li.new.line><ul.new.line><pre>The title of this page is: <strong>**{% $markdoc.frontmatter.title %}**</strong></pre><ul><li>We should see the title of the document:<li.new.line><ul.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A blockquote with a short text block discussing Markdoc after it." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da43f0c7574ee_image4_7991156ddeaee1214e67ad735a23352f_800.png"><div.new.line><figure.new.line><ul><li>Via the<a href="https://markdoc.dev/docs/variables#with-partials" target="_blank" rel="noopener noreferrer"> <u><code>variables</code> attribute</u></a> on a<a href="https://markdoc.dev/docs/partials" target="_blank" rel="noopener noreferrer"> <u><code>partial</code> tag</u></a>.<li.new.line><li>Manually from within your<a href="https://markdoc.dev/docs/nodes" target="_blank" rel="noopener noreferrer"> <u><code>Node</code></u></a> or<a href="https://markdoc.dev/docs/tags" target="_blank" rel="noopener noreferrer"> <u><code>Tag</code></u></a> <code>transform</code> functions.<li.new.line><ul.new.line><p>Markdoc uses <code>partials</code> to reuse content across documents. A separate Markdoc file stores the content, and it&#x27;s referenced from within the <code>partial</code> tag.<p.new.line><p>We can create a <code>partial</code> that displays a particular promotional content in any page we add it to.<p.new.line><p>To create a <code>partial</code>, create a new file, <code>./markdoc/partials/BikePromo.md</code>:<p.new.line><pre>----<br>It seems you’re enjoying this article on <strong>**{% $title %}**</strong>. I&#x27;m sure you&#x27;ll be interested in the following offer:<br>## Buy a bike and get two wheels free!<br>What do you get when you buy a bike?<br><em>_Two wheels!_<br></em>Well, for a limited time only, you can get two new bike wheels for free when you purchase one of our bikes!<br>Find out more [here](/), or maybe not, <em>*I&#x27;m not your boss*</em>.<br>----</pre><p>Partials automatically load from the <code>/markdoc/partials/</code> directory. Now, if we add the following to our document:<p.new.line><pre>{% partial file=&quot;bike-promo.md&quot; /%}</pre><p>It will load and render the variables and contents of <code>markdoc/partials/bike-promo.md</code>:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A webpage with intricately formatted text. " src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb73af94da47f517574ef_image5_ad23d7fc2114d2a4c9c2700516cd4d77_800.png"><div.new.line><figure.new.line><p>Next, we’re going to see how we can use another Markdoc feature: Functions.<p.new.line><h3 id="9c00e">Using Functions in Markdoc<h3.new.line><p>Functions in Markdoc allow us to extend Markdoc with custom utilities, which lets us transform our content and<a href="https://markdoc.dev/docs/syntax#variables" target="_blank" rel="noopener noreferrer"> <u>variables</u></a> at runtime.<p.new.line><p>Markdoc comes out-of-the-box with six built-in functions: <code>equals</code>, <code>and</code>, <code>or</code>, <code>not</code>, <code>default</code>, and <code>debug</code>. You can learn more about these<a href="https://markdoc.dev/docs/functions" target="_blank" rel="noopener noreferrer"> <u>functions in the Markdoc docs</u></a>.<p.new.line><p>Custom function registrations are almost identical to tags and nodes, except you create a <code>./markdoc/functions.js</code> file instead. Within this file, we’ll create an <code>includes</code> function that checks if a string contains a defined sub-string.<p.new.line><pre>// ./markdoc/functions.js<br><br><em>// ./markdoc/functions.js<br></em>export const includes = {<br> transform(parameters) {<br>  const [string, value] = Object.values(parameters);<br>  return string.includes(value);<br> },<br>};</pre><p>Now, we can add our custom function to our document:<p.new.line><pre>{% if includes($markdoc.frontmatter.title, &quot;Llamas&quot;) %}<br> &gt; This page is about Llamas<br> {% else /%}<br> &gt; This page is not about Llamas<br>{% /if %}</pre><p>With that, we should have something like this:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="The webpage with the same text as before and an additional blockquote." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb73af94da45b2b7574f0_image10_13cd337fab4bf79c53957e984f7f4d68_800.png"><div.new.line><figure.new.line><p>So far, we’ve explored the basic features of Markdoc and seen how we can use it to build out an impressive article page. In the next section, we’ll quickly cover how to add images to our content.<p.new.line><h2 id="bvkik">Working with Images in Markdoc<h2.new.line><p>We can simply use the markdown syntax to add any image that is in our <code>/public</code> directory to our article. For example, if we add the following to <code>./pages/articles/getting-started.md</code>:<p.new.line><pre>![image](/vercel.svg)</pre><p>We should see that the image shows up in the rendered page:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="The webpage with a rendered image below the text. " src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da40faf7574ec_image7_4d544f1b67dbc586924289aabbe6df41_800.png"><div.new.line><figure.new.line><p>We can also do something similar in the front matter section of the document and add a cover image for our article.<p.new.line><p>To do that, first add the path to the image in the front matter section:<p.new.line><pre>---<br><em>title</em>: <em>Get started with Markdoc<br>description</em>: <em>How to get started with Markdoc<br>cover</em>: <em>/images/martin-sanchez-gD3dUQpMlvk-unsplash.jpg<br></em>---</pre><p>Next, in <code>./layouts/ArticleLayout.jsx</code>, we’ll add the image:<p.new.line><pre><em>// ./layouts/ArticleLayout.jsx<br><br></em>import Head from &quot;next/head&quot;;<br>import Image from &quot;next/image&quot;;<br>import SiteHeader from &quot;../components/SiteHeader&quot;;<br>const ArticleLayout = ({ markdoc, children }) =&gt; {<br> const { title, description, cover } = markdoc.frontmatter;<br> return (<br>  &lt;&gt;<br>   {/* ... */}<br>   &lt;article className=&quot;site-article&quot;&gt;<br>    &lt;div className=&quot;wrapper&quot;&gt;<br>     &lt;header className=&quot;article-header&quot;&gt;<br>      {<em>/* render image */</em>}<br>      &lt;div className=&quot;img-cont relative h-56&quot;&gt;<br>       &lt;Image<br>        src={cover}<br>        fill={true}<br>        alt=&quot;cover&quot;<br>        className=&quot;object-cover rounded-b-2xl&quot;<br>       /&gt;<br>      &lt;/div&gt;<br>      {/* ... */}<br>     &lt;/header&gt;<br>     {/* ... */}<br>    &lt;/div&gt;<br>   &lt;/article&gt;<br>  &lt;/&gt;<br> );<br>};<br><br>export default ArticleLayout;</pre><p>With that, we should see our image:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="The website landing page with a header image." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da4161f7574e6_image2_0ed93de2f1d4b5d701cbbcbf5271e4fa_800.jpeg"><div.new.line><figure.new.line><p>In the next section, we’ll see how we can render a list of our articles.<p.new.line><h2 id="bhcqa">Creating an Articles page<h2.new.line><p>First, we’ll have to install a few packages, namely:<p.new.line><ul><li><code>glob-promise</code> so we can find all of our Markdown files in the <code>articles/</code> folder<li.new.line><li><code>gray-matter</code> so we can extract the title from the Markdown frontmatter<li.new.line><ul.new.line><p>To install, run:<p.new.line><pre>npm install gray-matter glob-promise</pre><p>Now, create a new file: <code>./pages/articles/index.js</code><p.new.line><pre><em>// ./pages/articles/index.js<br><br>import fs from &quot;fs&quot;;<br>import glob from &quot;glob-promise&quot;;<br>import matter from &quot;gray-matter&quot;;<br>import Head from &quot;next/head&quot;;<br>import Image from &quot;next/image&quot;;<br>import Link from &quot;next/link&quot;;<br>import path from &quot;path&quot;;<br>import SiteLayout from &quot;../../layouts/SiteLayout&quot;;<br><br>export const getStaticProps = async () =&gt; {<br>  // Find all Markdown files in the /articles directory<br>  const ARTICLES_DIR = path.join(process.cwd(), &quot;pages/articles&quot;);<br>  const articlesPaths = await glob(&quot;**/*.md&quot;, { cwd: ARTICLES_DIR });<br><br>  const articles = articlesPaths.map((articlePath) =&gt; {<br>    // get the slug from the markdown file name<br>    const slug = path.basename(articlePath, path.extname(articlePath));<br>    // read the markdown files<br>    const source = fs.readFileSync(<br>      path.join(process.cwd(), &quot;pages/articles&quot;, articlePath),<br>      &quot;utf8&quot;<br>    );<br>    // use gray-matter to parse the article frontmatter section<br>    const { data } = matter(source);<br>    const { title, description, cover } = data;<br><br>    return {<br>      title,<br>      description,<br>      cover,<br>      slug,<br>    };<br>  });<br>  return {<br>    props: {<br>      articles,<br>    },<br>  };<br>};<br><br>const Articles = ({ articles }) =&gt; {<br>  return (<br>    &lt;&gt;<br>      &lt;Head&gt;<br>        &lt;title&gt;My articles&lt;/title&gt;<br>        &lt;meta name=&quot;description&quot; content=&quot;View all my articles&quot; /&gt;<br>      &lt;/Head&gt;<br>      &lt;section&gt;<br>        &lt;header className=&quot;articles-header&quot;&gt;<br>          &lt;div className=&quot;wrapper&quot;&gt;<br>            &lt;h1 className=&quot;font-extrabold text-5xl&quot;&gt;<br>              Hey there, view all my articles<br>            &lt;/h1&gt;<br>          &lt;/div&gt;<br>        &lt;/header&gt;<br>        &lt;ul className=&quot;articles&quot;&gt;<br>          {articles.map((article) =&gt; (<br>            &lt;li key={article.slug} className=&quot;article&quot;&gt;<br>              &lt;Link href={&#x60;/articles/${article.slug}&#x60;}&gt;<br>                &lt;header className=&quot;article-item-header&quot;&gt;<br>                  &lt;Image<br>                    src={article.cover}<br>                    width={300}<br>                    height={200}<br>                    alt=&quot;cover&quot;<br>                  /&gt;<br>                  &lt;div className=&quot;details&quot;&gt;<br>                    &lt;h2 className=&quot;font-bold text-3xl&quot;&gt;{article.title}&lt;/h2&gt;<br>                    &lt;p&gt; {article.description} &lt;/p&gt;<br>                  &lt;/div&gt;<br>                &lt;/header&gt;<br>              &lt;/Link&gt;<br>            &lt;/li&gt;<br>          ))}<br>        &lt;/ul&gt;<br>      &lt;/section&gt;<br>    &lt;/&gt;<br>  );<br>};<br>export default Articles;<br><br>// define layout for articles page<br>Articles.getLayout = (page) =&gt; {<br>  return &lt;SiteLayout&gt; {page} &lt;/SiteLayout&gt;;<br>};</em></pre><p>Here, we’re using <code>getStaticProps</code> to do the following:<p.new.line><ul><li>Retrieve all of the <code>.md</code> files in the <code>./pages/articles</code> folder<li.new.line><li>Read the contents of each file and obtain the <code>slug</code> and <code>frontmatter</code> data<li.new.line><ul.new.line><p>Then, we export the data and access it from our <code>Articles</code> component as <code>props</code>. We can create a list of articles with slug, title, description, and cover data.<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="The website has been transformed into a blog landing page. " src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63ebb739f94da413e07574e5_image8_dc6ebb3ffa497ba5189af414914eedc2_800.jpeg"><div.new.line><figure.new.line><p>Sweet!<p.new.line><h2 id="1t32r">Conclusion<h2.new.line><p>In this article, we built out a blog using Markdoc and all we have to do to update our content is edit a markdown file or create a new one, save it, and redeploy.<p.new.line><p>Since the content and the application live together, we do not have to go back and forth between a CMS or database in order to update our blog.<p.new.line><p>We can also add more features, like tags and sorting by date, just by including the information in the front matter of each <code>.md</code> file.<p.new.line><p>Thanks for going through this tutorial! I hope you learned a thing or two; feel free to keep exploring.<p.new.line><h3 id="aucc">Further Reading and Resources<h3.new.line><p>Here are a few links you might find useful:<p.new.line><h4 id="djmg6">Source Code and Live Example<h4.new.line><ul><li><u><a href="https://github.com/miracleonyenma/markdoc-app" target="_blank" rel="noopener noreferrer">Source code on GitHub</a></u><li.new.line><li><u><a href="https://markdoc-app.vercel.app/" target="_blank" rel="noopener noreferrer">Live example hosted on Vercel</a></u><li.new.line><ul.new.line><h4 id="e5uo2">Further Reading<h4.new.line><ul><li><u><a href="https://markdoc.dev/docs/nextjs" target="_blank" rel="noopener noreferrer">Markdoc documentation</a></u><li.new.line><li><u><a href="https://markdoc.dev/docs/nextjs" target="_blank" rel="noopener noreferrer">Using Markdoc with Next.js</a
