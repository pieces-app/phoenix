{
  "Title": "React: Controlled vs Uncontrolled Components",
  "Slug": "controlled-vs-uncontrolled-components-in-react",
  "Collection ID": "642da2c43fe34c364a69857f",
  "Item ID": "642da2c43fe34c65436989d1",
  "Created On": "Tue Aug 02 2022 14:36:05 GMT+0000 (Coordinated Universal Time)",
  "Updated On": "Mon Feb 27 2023 22:05:11 GMT+0000 (Coordinated Universal Time)",
  "PublishedOn": "Wed Apr 05 2023 16:53:15 GMT+0000 (Coordinated Universal Time)",
  "MainImage": "https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62f53e032130ef2e53e639ee_controlled-vs-uncontrolled.jpg",
  "Post summary": "Let's talk about controlled vs uncontrolled React components, with some examples. We’ll discuss their advantages and disadvantages, and finally, we’ll look at the Formik library.",
  "FullPost": "<p id=\"\">Let's talk about React controlled vs uncontrolled components. We’ll discuss their advantages and disadvantages, investigate some examples along the way, and finally, look at Formik, a form library available in the React ecosystem.</p><p id=\"\">Without further ado, let’s get started!</p><p id=\"\"><strong>Prerequisites</strong></p><p id=\"\">To follow along with this article, I would highly recommend reading these articles for some background:</p><ul id=\"\"><li id=\"\"><a href=\"https://reactjs.org/docs/components-and-props.html\" target=\"_blank\" id=\"\">Class and function based components</a></li><li id=\"\"><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\" target=\"_blank\">Bind function in JS</a></li></ul><h2 id=\"\">What is a Controlled Component?</h2><p id=\"\">Controlled components are components whose value is directed/driven by React’s state. By state, we mean the state we store inside a React component, i.e., inside <em id=\"\">this.state</em> or with <em id=\"\">useState</em>.</p><p id=\"\">This means that these components will receive the latest changes.</p><p id=\"\">For any controlled component, we pass our state variable inside the <em id=\"\">value</em> prop of the component. The function that changes this <em id=\"\">state</em> variable of the component is passed in the <em id=\"\">onChange</em> prop of the controlled component.</p><p id=\"\">Here is an example that demonstrates a controlled component:</p><figure id=\"\" class=\"w-richtext-figure-type-image w-richtext-align-fullwidth\" style=\"max-width:1108px\" data-rt-type=\"image\" data-rt-align=\"fullwidth\" data-rt-max-width=\"1108px\"><div id=\"\"><img src=\"https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62f5416cbe7e7ecbfdf8b18b_raycast-untitled%20(96).png\" loading=\"lazy\" id=\"\" width=\"auto\" height=\"auto\" alt=\"Code snippet with React code.\"></div><figcaption id=\"\"><a href=\"https://raman.pieces.cloud/?p=14504e848a\" target=\"_blank\" id=\"\">Save to Pieces</a></figcaption></figure><p id=\"\">Let’s explain:</p><ul id=\"\"><li id=\"\"><em id=\"\">App</em> is a simple function-based React component.</li><li id=\"\">Its <em id=\"\">render</em> method consists of a <em id=\"\">form</em> with an <em id=\"\">input</em> element and a <em id=\"\">strong</em> element that displays the value of the state variable of the component.</li><li id=\"\">We pass the state variable <em id=\"\">inputValue</em> as a <em id=\"\">value</em> prop to the input element.</li><li id=\"\">Similarly, we pass the <em id=\"\">handleOnChange</em> function to the <em id=\"\">onChange</em> prop of the input component.</li><li id=\"\">Now, whatever you type inside the input element will set the value of the <em id=\"\">inputValue</em> state via <em id=\"\">handleOnChange</em>, and then the same will be displayed in the <em id=\"\">input</em> element.</li><li id=\"\">To show that the state variable <em id=\"\">inputValue</em> is changing, we display it inside the <em id=\"\">strong</em> element.</li></ul><p id=\"\">Here's a video for the above code:</p><div id=\"\"></div><p id=\"\">The controlled component’s <em id=\"\">value</em> prop does not always need to be a component’s internal state. It can be a prop of the parent component, or it can come from the Redux store. This is similar to the <em id=\"\">onChange</em> prop.</p><figure id=\"\" class=\"w-richtext-figure-type-image w-richtext-align-fullwidth\" style=\"max-width:1528px\" data-rt-type=\"image\" data-rt-align=\"fullwidth\" data-rt-max-width=\"1528px\"><div id=\"\"><img src=\"https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62f42c8c5606d806c1b8a6b5_raycast-untitled%20(84).png\" loading=\"lazy\" id=\"\" width=\"auto\" height=\"auto\" alt=\"A code snippet with React code.\"></div><figcaption id=\"\"><a href=\"https://raman.pieces.cloud/?p=5c79419b8f\" target=\"_blank\" id=\"\">Save to Pieces</a></figcaption></figure><p id=\"\">In a similar manner, we can use <em id=\"\">react-redux</em> to get the state and the <em id=\"\">handleOnChange</em> function from the Redux store to have similar functionality to what we had when we were using <em id=\"\">useState</em>.</p><p id=\"\">The same context can be applied to the checkbox, radio, text area, and select DOM elements so that they can act as controlled elements.</p><p id=\"\">Here are some of the advantages of using controlled components:</p><ul id=\"\"><li id=\"\">The UI and the data are in sync</li><li id=\"\">Form data can be passed between different components</li><li id=\"\">The event handler and the value prop can be from the parent or a redux store</li><li id=\"\">The React component acts as a source of truth for this component</li></ul><p id=\"\">Some disadvantages of controlled components:</p><ul id=\"\"><li id=\"\">They render at each input change</li><li id=\"\">A controlled component can be a bad choice when large changes are required to be made to the component</li></ul><h1 id=\"\">What is a React Uncontrolled Component?</h1><p id=\"\">As the name suggests, the value of uncontrolled components is not driven by the React component’s state variable. It's completely controlled by the DOM.</p><p id=\"\">Uncontrolled components are generally used when the use case is simple or the action is not trackable; for example, a user uploading a file using file input.</p><p id=\"\">The basic requirement of any uncontrolled component is to be handled by the DOM. In this case, we cannot pass the <em id=\"\">state</em> variable inside the form’s input element. Now the question arises — how are we going to set the value inside this input element?</p><p id=\"\">We use React’s <em id=\"\">useRef</em> for functional components or <em id=\"\">createRef</em> for class-based components. A <em id=\"\">useRef</em> is a hook that returns a mutable object with <em id=\"\">current</em> as its property with value being <em id=\"\">initialValue</em> that is passed inside the hook.</p><p id=\"\">Here is the syntax of the <em id=\"\">useRef</em> hook:</p><figure id=\"\" class=\"w-richtext-figure-type-image w-richtext-align-fullwidth\" style=\"max-width:1040px\" data-rt-type=\"image\" data-rt-align=\"fullwidth\" data-rt-max-width=\"1040px\"><div id=\"\"><img src=\"https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62f42cccb9b831cce62ef24b_raycast-untitled%20(85).png\" loading=\"lazy\" id=\"\" width=\"auto\" height=\"auto\" alt=\"A code snippet with React code.\"></div><figcaption id=\"\"><a href=\"https://raman.pieces.cloud/?p=c64a479614\" target=\"_blank\" id=\"\">Save to Pieces</a></figcaption></figure><p id=\"\">A <em id=\"\">ref</em> object can be used in many ways, e.g., as a state variable that does not re-render the component on change, to access DOM elements, etc.</p><p id=\"\">We can leverage this into our React uncontrolled component to access input elements attributes, i.e., value properties.</p><p id=\"\">Here's a simple example of how you can create an uncontrolled component:</p><figure id=\"\" class=\"w-richtext-figure-type-image w-richtext-align-fullwidth\" style=\"max-width:1346px\" data-rt-type=\"image\" data-rt-align=\"fullwidth\" data-rt-max-width=\"1346px\"><div id=\"\"><img src=\"https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62f42df7f09d03702f9c3405_raycast-untitled%20(87).png\" loading=\"lazy\" id=\"\" width=\"auto\" height=\"auto\" alt=\"A code snippet with React code.\"></div><figcaption id=\"\"><a href=\"https://raman.pieces.cloud/?p=a4984992ae\" target=\"_blank\" id=\"\">Save to Pieces</a></figcaption></figure><p id=\"\">And here is what the above component will look like:</p><div id=\"\"></div><p id=\"\">As you can see, this <em id=\"\">App</em> component consists of <em id=\"\">form</em> and a bunch of <em id=\"\">span</em> elements. We use the <a href=\"https://jsonplaceholder.typicode.com/\" target=\"_blank\" id=\"\">JSON placeholder API</a> in the component to fetch the <em id=\"\">post</em> based on <em id=\"\">id</em>. This is the summary of our component, but let’s understand a bit more about how the <em id=\"\">App</em> component works internally.</p><ul id=\"\"><li id=\"\">Inside the <em id=\"\">form</em> element, we have a static <em id=\"\">select</em> element with a couple of options.</li><li id=\"\">We are making use of a <em id=\"\">ref</em> object here. This <em id=\"\">ref</em> object is named as <em id=\"\">selectRef</em> and this is being passed on to the <em id=\"\">select</em> element as a <em id=\"\">ref</em> prop.</li><li id=\"\">Here comes the catch— we don’t need to watch for any changes that happen to the <em id=\"\">select</em> element, nor do we need to make use of a state variable to keep track of the current value that is selected in this element.</li><li id=\"\">This begs the question, how do we get the latest value from the <em id=\"\">select</em> element?</li><li id=\"\">Well, we don’t need to. This is an uncontrolled component/element; a component/element that is managed by the DOM.</li><li id=\"\">So, the change in the <em id=\"\">value</em> property of the select element is managed by the browser.</li><li id=\"\">Now we just need to find a way to capture this value. <em id=\"\">refs</em> comes to rescue here. Since we passed our <em id=\"\">ref</em> object into the <em id=\"\">select</em> element as a prop, we can now access the value present inside this element.</li><li id=\"\">To get hang of this, you can check out the <em id=\"\">handleOnSubmit</em> function. This function makes use of the <em id=\"\">selectRef.current.value</em> to access the value property of the <em id=\"\">select</em> element. The <em id=\"\">selectRef</em> stores all of the values inside the <em id=\"\">current</em> object. In this case, <em id=\"\">selectRef.current</em> will store the <em id=\"\">select</em> element itself. To access the value, simply access its <em id=\"\">.value</em> property.</li><li id=\"\">Next, the <em id=\"\">handleOnSubmit</em> function calls the API. On success, we simply store it in the state variable <em id=\"\">apiData</em>.</li></ul><p id=\"\">Here are some advantages of uncontrolled components:</p><ul id=\"\"><li id=\"\">No component re-renders</li><li id=\"\">Browser DOM handles the changes to the element</li><li id=\"\">Simple to use</li><li id=\"\">Keeps track of the internal state</li></ul><p id=\"\">And some of the disadvantages of uncontrolled components:</p><ul id=\"\"><li id=\"\">Cannot be used in complicated scenarios where we need to pass the value to different components</li><li id=\"\">It’s not always efficient to use uncontrolled components where we require granular control over the value</li></ul><h2 id=\"\"><a href=\"https://formik.org/\" target=\"_blank\">Formik</a></h2><p id=\"\">Formik is an open-source library to build forms in React and React Native. It’s the world’s leading library for building forms in React.</p><p id=\"\">Formik is a complete solution that helps you to implement form validation, keep track of visited fields, and handle form submission in an efficiently and robustly. It's based on the concept of a controlled component react.</p><p id=\"\">Now, let’s look at one simple example of how can Formik can be used to build a form along with the form validation.</p><p id=\"\">We are going to use the same uncontrolled component example. First, we’ll convert the example into a controlled component and then, use Formik to make our life easier.</p><figure id=\"\" class=\"w-richtext-figure-type-image w-richtext-align-fullwidth\" style=\"max-width:1546px\" data-rt-type=\"image\" data-rt-align=\"fullwidth\" data-rt-max-width=\"1546px\"><div id=\"\"><img src=\"https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62f52af74f9c70097ce76bea_raycast-untitled%20(94).png\" loading=\"lazy\" id=\"\" width=\"auto\" height=\"auto\" alt=\"A code snippet with a React component.\"></div><figcaption id=\"\"><a href=\"https://raman.pieces.cloud/?p=d424419f0c\" target=\"_blank\" id=\"\">Save to Pieces</a></figcaption></figure><p id=\"\">Here are some of the brief points that will get you up to speed on understanding the above component:</p><ul id=\"\"><li id=\"\">The Formik library provides us with some easy-to-use components that help us to build Formik forms in no time.</li><li id=\"\"><em id=\"\">Formik</em> is a wrapper component that helps to build forms.</li><li id=\"\">It takes in <em id=\"\">initialValues</em>, which tells the Formik form about the fields and their initial values.</li><li id=\"\">Next, we have the <em id=\"\">validationSchema</em> prop. It can accept a <a href=\"https://github.com/jquense/yup\" target=\"_blank\" id=\"\">Yup</a> object to define validations inside the form.</li><li id=\"\">Finally, we provide our <em id=\"\">submitHandler</em> function as a callback that needs to be executed whenever a submission takes place.</li><li id=\"\">This is a controlled component. All the values are handled by Formik.</li><li id=\"\">In the above component, we have used <em id=\"\">Formik</em>, <em id=\"\">Field</em> and <em id=\"\">ErrorMessage</em> components. These are similar to the normal input elements present inside the form element.</li><li id=\"\">The <em id=\"\">Field</em> component, as the name suggests, acts as a wrapper component on top of form input elements.</li><li id=\"\">Finally, we have the <em id=\"\">ErrorMessage</em> component. This component takes in the <em id=\"\">name</em> prop. This <em id=\"\">name</em> prop will be used by this component to provide an element that displays the error message for that particular field.</li><li id=\"\">Now, you might be wondering how these components know which field they should work for. Here comes the <em id=\"\">name</em> and <em id=\"\">id</em> props to the rescue. You should provide either of these props to make sure your <em id=\"\">Field</em> and <em id=\"\">ErrorMessage</em> components work properly.</li><li id=\"\">We should also make sure that we pass the submitted values to Yup’s <em id=\"\">validations</em> that we set earlier. &nbsp;For example, for the select field, we pass in <em id=\"\">name=\"selectVal\"</em> in the <em id=\"\">Field</em> and <em id=\"\">ErrorMessage</em> components. In this way, Formik knows how to map these wrapper components to their respective fields.</li></ul><p id=\"\">Finally, here is our outcome with form validation in place with the help of Formik:</p><div id=\"\"></div><h2 id=\"\">Summary</h2><p id=\"\">Now, you've learned some of the differences of React controlled vs uncontrolled components. Choosing which type of component to use in your project completely depends upon your use case.</p><p id=\"\">If you’re looking for tangible results with a simple use case or trying to use memory-intensive operations, such as document editors, uncontrolled components are the way to go.</p><p id=\"\">If you’re looking for more granular control over the values of form elements, then you should use controlled components.</p><h3 id=\"\"><strong id=\"\">Become More Productive Writing Your React Apps</strong></h3><p id=\"\">Every component you create in React requires tons of repetition. Across every frontend project, there are custom setups and best practices that teams follow. Pieces helps you with any React project by creating a local micro-repository where you can store any code snippets and their relevant metadata on your machine. Additionally, Pieces makes it incredibly easy to share your snippets, create collections to onboard others onto a project, and even integrate your snippets directly in your IDE. Our team of developers is pushing changes every day to build the most effective and efficient micro-repo for you.</p><p id=\"\"><a href=\"https://code.pieces.app/install\" target=\"_blank\">Try Pieces now using the personal plan for free and supercharge your React projects</a>!</p>",
  "Date": "Thu Aug 11 2022 00:00:00 GMT+0000 (Coordinated Universal Time)",
  "Author": "Raman Hundal",
  "Author Photo": "https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62f52017e7a1c5a30dea33e2_me.jpeg",
  "AMP URL": "",
  "TOC based on...": "h2,h3",
  "Tags": "react",
  "CTA": "<p>View 16 essential TypeScript snippets</p>",
  "CTA link": "https://code.pieces.app/collections/typescript",
  "Canonical URL": ""
}
