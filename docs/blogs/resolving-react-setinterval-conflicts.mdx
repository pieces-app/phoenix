![](https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63dd71d462b05665dab14f99_setIntervalinreact_d45340501964190fb2b394404f9052e5_2000.jpeg)
"react-7"
# React SetInterval Conflicts: How to Easily Resolve Them
> Wed Apr 05 2023 16:53:15 GMT+0000 (Coordinated Universal Time)
<figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="Two people working at computers." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63dd71d562b0564d56b14f9a_setIntervalinreact_a83ff18b60993011bd7361ec648e522a_800.jpeg"><div.new.line><figure.new.line><p>Have you ever noticed React<a href="https://developer.mozilla.org/en-US/docs/Web/API/setInterval" target="_blank" rel="noopener noreferrer"> <u><code>setInterval</code></u></a> functions acting strangely? I’ve found that React Hooks can often help to fix <code>setInterval</code> problems.<p.new.line><p>In this article, I&#x27;ll demonstrate how to use <code>setInterval</code> with React Hooks. However, it should be noted that the way <code>setInterval</code> works in Vanilla JavaScript is generally different.<p.new.line><h2 id="bbfpt">Overview of SetInterval <h2.new.line><p>At each specified timing event, the <code>setInterval()</code> React method repeats a block of code.<p.new.line><p>This is JavaScript&#x27;s standard <code>setInterval</code> syntax:<p.new.line><pre>setInterval(function, milliseconds);</pre><p>Its qualities are:<p.new.line><ul><li><strong>Function</strong>: The functions store executable code in a local scope.<li.new.line><li><strong>Milliseconds</strong>:  The milliseconds are a timer that triggers the function to execute a line of code.<li.new.line><ul.new.line><p>We won&#x27;t go into more detail in this React <code>setInterval</code> introduction. Instead, please refer to these <u><a href="https://developer.mozilla.org/en-US/docs/Web/API/setInterval" target="_blank" rel="noopener noreferrer">docs</a>.</u><p.new.line><h2 id="8l3kb">Understanding the Effects of SetInterval on React Component Rendering<h2.new.line><p>Every time the<a href="https://reactjs.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener noreferrer"> <u>state</u></a> of a component changes, React prepares a render. This takes place once a render has been scheduled. React will look for the ideal time to do this. When we call the <code>setState</code> function in React, we are change the state, which results in an update (in React Hooks, we would use <code>useState</code>).<p.new.line><p>A component may re-render itself for one of four reasons: state changes, parent (or child) re-renderings,<a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener noreferrer"> <u>context</u></a> changes, and hook changes. A widespread misconception is that when the component&#x27;s props change, re-renders likewise take place. On its own, this is untrue.<p.new.line><p>If React executes a<a href="https://reactjs.org/docs/react-component.html" target="_blank" rel="noopener noreferrer"> <u>component</u></a> more than once when using <code>setInterval</code> without a React Hook, the <code>SetInterval</code> will crash. If you use React and don&#x27;t use the React Hook to build a counter increment mechanism with React <code>setInterval</code> in an initial page load, it will crash the counter. Therefore, we&#x27;ll construct a counter increment in this tutorial using React Hooks.<p.new.line><h3 id="1acld">Bad Practices When Using SetInterval in React.js<h3.new.line><p>Below is an example of the problem with utilizing <code>setInterval</code> in JavaScript without a React Hook:<p.new.line><p><strong>Bad Practice</strong><p.new.line><pre>import { useState } from &quot;react&quot;;<br>import { Fragment } from &quot;react&quot;;<br><br>function App() {<br> let [count, setCount] = useState(0);<br> setInterval(() =&gt; {<br>  setCount(count + 1);<br>}, 2000);<br><br>return (<br> &lt;Fragment&gt;<br>  &lt;h1&gt;Count: {count}&lt;/h1&gt;<br> &lt;/Fragment&gt;<br> );<br>}<br><br>export default App;</pre><p>We can see that <code>setInterval</code> was not used in a React Hook in the code above, which is not best practice.<p.new.line><p>The code will be printed when the page loads for the first time, and along the way, the counter will begin to act improperly, which is not the best scenario.<p.new.line><h2 id="9108v">Resolving Conflicts in React.js<h2.new.line><p>Next, we’ll be using <code>setInterval</code> with React Hooks in various ways.<p.new.line><p>In this section, we’ll be working with code samples and using a counter in React and a<a href="https://reactjs.org/docs/hooks-overview.html" target="_blank" rel="noopener noreferrer"> <u>React Hook</u></a>.<p.new.line><h3 id="d416">Using SetInterval in a Function-Based Component<h3.new.line><p>Immediately after the page loads for the first time, we&#x27;ll call <code>setInterval</code>.<p.new.line><p>Here, we&#x27;ll make use of <code>setInterval</code> by automating its execution upon a page&#x27;s initial load:<p.new.line><pre>import { useEffect } from &quot;react&quot;;<br>import { useState } from &quot;react&quot;;<br>import { Fragment } from &quot;react&quot;;<br><br>function App() {<br> let [count, setCount] = useState({<br>  num: 0,<br>});<br><br>useEffect(() =&gt; {<br> setInterval(() =&gt; {<br> setCount((prevState) =&gt; {<br>  return {<br>   num: prevState.num + 1,<br>  };<br> });<br>}, 1000);<br>}, []);<br><br>return (<br> &lt;Fragment&gt;<br>  &lt;div style={{ textAlign: &quot;center&quot; }}&gt;<br>   &lt;h1&gt;Count: {count.num}&lt;/h1&gt;<br>  &lt;/div&gt;<br> &lt;/Fragment&gt;<br>);<br>}<br><br>export default App;</pre><p>React Hooks like<a href="https://reactjs.org/docs/hooks-state.html" target="_blank" rel="noopener noreferrer"> <u><code>useState</code></u></a> and<a href="https://www.google.com/search?q=react+useEffect&amp;rlz=1C1ONGR_enNG1008NG1008&amp;oq=react+useEffect&amp;aqs=chrome..69i57j0i512l3j0i20i263i512j0i512j69i60l2.5344j0j4&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank" rel="noopener noreferrer"> <u><code>useEffect</code></u></a> were utilized in the code above.<p.new.line><p>The <code>useState</code> is dependent on its prior state:<p.new.line><pre>setCount((prevState) =&gt; {<br>  return {<br>   num: prevState.num + 1,<br>  };<br>});<br> useEffect(() =&gt; {<br>  setInterval(() =&gt; {<br>   setCount((prevState) =&gt; {<br>    return {<br>     num: prevState.num + 1,<br>   };<br>  });<br> }, 1000);<br>}, []);</pre><p>Output:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A count output." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63878e41c47f5726807b7e2a_image7_500c7375fc04ff89348244a79c76c3bb_800.png"><div.new.line><figure.new.line><p>As you can see, the <code>useEffect</code> method, which has a return function, is used in the code above.<p.new.line><p><em>The cleaning function (after the user exits the page and the component unmounts) is the return function.</em><p.new.line><p>When the app component loads for the first time, the <code>useEffect</code> hook wraps the <code>setState</code> counter to execute once. This stops React from entering an endless loop.<p.new.line><p>Kindly note that you can run the code without the cleanup return function. However, it&#x27;s best practice to use it.<p.new.line><h3 id="emgg3">Using setInterval in a React Class-based Component<h3.new.line><p>Next, we’ll look at JavaScript <code>setInterval</code> in a class-based component in code below.<p.new.line><p>Furthermore, to start <code>setInterval</code> and stop crashes and errors, the <code>setInterval</code> is inserted inside the<a href="https://reactjs.org/docs/react-component.html" target="_blank" rel="noopener noreferrer"> <u>ComponentDidMount</u></a> component.<p.new.line><p>Read more about the React<a href="https://reactjs.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener noreferrer"> <u>Lifecycle</u></a><u>.</u><p.new.line><p>Keep in mind that the interval begins as soon as a component loads for the first time. <code>UseEffect</code> is utilized in the function base component.<p.new.line><pre>import React from &quot;react&quot;;<br><br>class App extends React.Component {<br> state = { count: 0 };<br> componentDidMount() {<br>  setInterval(() =&gt; {<br>   <em>this</em>.setState((prevState) =&gt; {<br>    return {<br>     ...prevState,<br>    count: prevState.count + 1,<br>   };<br>  });<br> }, 1000);<br>}<br><br>render() {<br> return (<br>  &lt;div&gt;<br>   &lt;h1&gt;{<em>this</em>.state.count} Seconds&lt;/h1&gt;<br>  &lt;/div&gt;<br> );<br>}<br>}<br><br>export default App;</pre><p>Output:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="The output of the above code, which is 2 seconds." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63878e41c47f5777f67b7e2b_image1_fae1e6f6a2275037f169ca9c04b5e522_800.png"><div.new.line><figure.new.line><h3 id="bd70h">Calling React SetInterval from onClick in a Function-based Component<h3.new.line><p>We can quickly use an <code>onClick</code> to call <code>setInterval</code>.<p.new.line><pre>import { useState } from &quot;react&quot;;<br><br>function App() {<br> const [count, setCount] = useState(0);<br><br>const startCountHandler = () =&gt; {<br> setInterval(() =&gt; {<br>  setCount((count) =&gt; count + 1);<br> }, 1000);<br>};<br><br>return (<br> &lt;div style={{ textAlign: &quot;center&quot; }}&gt;<br>  &lt;h1&gt;{count}&lt;/h1&gt;<br>  &lt;br /&gt;<br>  &lt;button onClick={startCountHandler}&gt;Start&lt;/button&gt;<br> &lt;/div&gt;<br>);<br>}<br><br>export default App;</pre><p>Output:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="The output of a React setInterval function; 551." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63878e41c47f575e307b7e2d_image5_16d5b4cd954ec316c1688ca980ed7667_800.png"><div.new.line><figure.new.line><h3 id="ba290">Using Clear Interval from an onClick in a Function-based Component<h3.new.line><p>To stop the counter in this area, we&#x27;ll use<a href="https://developer.mozilla.org/en-US/docs/Web/API/clearInterval" target="_blank" rel="noopener noreferrer"> <u>clearinterval</u></a>. It is incredibly simple to use.<p.new.line><pre>import { useState } from &quot;react&quot;;<br><br>function App() {<br> const [count, setCount] = useState(0);<br> const [intervalId, setIntervalId] = useState(0);<br><br>const startCountHandler = () =&gt; {<br> let newIntervalId = setInterval(() =&gt; {<br>  setCount((count) =&gt; count + 1);<br>}, 1000);<br><br> setIntervalId(newIntervalId);<br>};<br><br><em>// Stopping the interval<br></em>const stopCountHandler = () =&gt; {<br> clearInterval(intervalId);<br>};<br><br>return (<br> &lt;div style={{ textAlign: &quot;center&quot; }}&gt;<br>  &lt;h1&gt;{count}&lt;/h1&gt;<br>  &lt;br /&gt;<br>  &lt;button onClick={startCountHandler}&gt;Start&lt;/button&gt;<br>  &lt;br /&gt;<br>  &lt;button onClick={stopCountHandler}&gt;Stop&lt;/button&gt;<br> &lt;/div&gt;<br>);<br>}<br><br>export default App;</pre><p>To store the interval id obtained from <code>setInterval</code>, a new state was made. The function for establishing the interval is activated when we click the start button, and we added <code>setIntervalId(newIntervalId)</code> inside the React <code>SetInterval</code> function to save the interval id in the state we generated for the <code>intervalID</code>.<p.new.line><p>Output:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A React setInterval component&#39;s output: 14." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63878e41c47f5701327b7e2e_image2_528402bdf8649552a6a563bfbb958a3c_800.png"><div.new.line><figure.new.line><p>We can start the counter by pressing the start button, and stop the counter by pressing the stop button. By hitting the start button once more, a paused counter can be started again.<p.new.line><h3 id="5jt84">Starting SetInterval in a Class-based Component from onClick<h3.new.line><p>In this part, we&#x27;ll call <code>setInterval</code> from a class-based component&#x27;s<a href="https://reactjs.org/docs/handling-events.html" target="_blank" rel="noopener noreferrer"> <u>onClick</u></a> event.<p.new.line><p><em>Note: Take care to bind the ‘this’ keyword, or else you can’t access the <code>this.setState</code> in the <code>startCountHandler</code> function.</em><p.new.line><pre>import React from &quot;react&quot;;<br><br>class App extends React.Component {<br> constructor(props) {<br>  <em>super</em>(props);<br>  <em>this</em>.state = { count: 0, intervalId: 0 };<br><br> <em>// Binfing this keyword<br> this</em>.startCountHandler = <em>this</em>.startCountHandler.bind(<em>this</em>);<br>}<br>startCountHandler() {<br> setInterval(() =&gt; {<br>  <em>this</em>.setState((prevState) =&gt; {<br>   return {<br>    ...prevState,<br>    count: prevState.count + 1,<br>   };<br>  });<br> }, 1000);<br>}<br><br>render() {<br> return (<br>  &lt;div&gt;<br>   &lt;h1&gt;{<em>this</em>.state.count} Seconds&lt;/h1&gt;<br>   &lt;button onClick={<em>this</em>.startCountHandler}&gt;Start&lt;/button&gt;<br>  &lt;/div&gt;<br> );<br>}<br>}<br><br>export default App;</pre><p>Output:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A timer created with a setInterval component." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63878e41c47f571e4d7b7e30_image6_fa54be2aa4ad64ee632bf2eaf0d20d70_800.png"><div.new.line><figure.new.line><h3 id="9j7av">Stopping the Countdown in Class-based Components Using clearInterval<h3.new.line><p>In this section, we&#x27;ll utilize <code>clearInterval</code> in a class-based component to stop the counter from running during an <code>onClick</code> event.<p.new.line><p>Let&#x27;s get going.<p.new.line><p><em>The function that will stop or pause the counter increment will be the React <code>setInterval</code> handler, to which we will bind the keyword &quot;this.&quot;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="noopener noreferrer"> <u>Learn more about the “this” keyword</u></a><u>.</u></em><p.new.line><p>The code for a class-based component is shown below.<p.new.line><pre>import React, { useEffect, useState } from &quot;react&quot;;<br><br>class App extends React.Component {<br> constructor(props) {<br>  <em>super</em>(props);<br>  <em>this</em>.state = { count: 0, intervalId: 0 };<br><br><em>// Binding this keyword<br>this</em>.startCountHandler = <em>this</em>.startCountHandler.bind(<em>this</em>);<br><em>this</em>.stopCountHandler = <em>this</em>.stopCountHandler.bind(<em>this</em>);<br>}<br>startCountHandler() {<br> let newIntervalId = setInterval(() =&gt; {<br>  <em>this</em>.setState((prevState) =&gt; {<br>   return {<br>    ...prevState,<br>    count: prevState.count + 1,<br>   };<br>});<br>}, 1000);<br><br><em>// Append the interval Id to state interval<br>this</em>.setState((prevState) =&gt; {<br> return {<br>  ...prevState,<br>  intervalId: newIntervalId,<br> };<br>});<br>}<br><br><em>// Stopping the setInterval with clearinterval<br></em>stopCountHandler() {<br> if (<em>this</em>.state.intervalId) {<br>  clearInterval(<em>this</em>.state.intervalId);<br> }<br>}<br><br>render() {<br> return (<br>  &lt;div style={{ textAlign: &quot;center&quot; }}&gt;<br>   &lt;h1&gt;{<em>this</em>.state.count} Seconds&lt;/h1&gt;<br>   &lt;button onClick={<em>this</em>.startCountHandler}&gt;Start&lt;/button&gt;<br>   &lt;br /&gt;<br>   &lt;button onClick={<em>this</em>.stopCountHandler}&gt;Stop&lt;/button&gt;<br>  &lt;/div&gt;<br> );<br>}<br>}<br><br>export default App;</pre><p>Output:<p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A timer with a start and a stop button." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63878e41c47f5729bd7b7e2c_image4_aa4ac120590b8c621251fcb1e1794c75_800.png"><div.new.line><figure.new.line><h3 id="7nd9h">Utilizing a Backward Counter<h3.new.line><pre>import { useState, useEffect } from &#x27;react&#x27;;<br><br>const ForwardCounter = () =&gt; {<br> const [counter, setCounter] = useState(0);<br><br>useEffect(() =&gt; {<br> const interval = setInterval(() =&gt; {<br>  setCounter((prevCounter) =&gt; prevCounter - 1);<br> }, 1000);<br><br> return () =&gt; clearInterval(interval);<br>}, []);<br><br> return &lt;h1&gt;{counter}&lt;/h1&gt;;<br>};<br><br>export default ForwardCounter;</pre><p>The aforementioned code is a straightforward example of utilizing <code>setInterval</code> in a React Hook to interact with a backward counter.<p.new.line><p>Please be aware that using <code>setInterval</code> in a React Hook <code>useEffect</code> will cause the cleanup function to run.<p.new.line><h3 id="185ta">The Cleanup Function in useEffect<h3.new.line><p>In this section, we&#x27;ll demonstrate how to send a request to a fake server utilizing the<a href="https://reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener noreferrer"> <u>useEffect cleanup function</u></a> rather than while the user is still typing.<p.new.line><p><em>The cleaning function, which runs after the user exits the page and the component unmounts, is the return function.</em><p.new.line><p>This greatly helps to avoid sending many requests while a user is typing, which would slow down our web app. Creating a search mechanism that returns a list of values from a server in this way is great practice.<p.new.line><p>Here, we&#x27;ll implement this process using<a href="https://developer.mozilla.org/en-US/docs/Web/API/setTimeout" target="_blank" rel="noopener noreferrer"> <u><code>setTimeout</code></u></a> rather than <code>setInterval</code>.<p.new.line><p>Now, we’ll use <u><code><a href="https://developer.mozilla.org/en-US/docs/Web/API/clearInterval" target="_blank" rel="noopener noreferrer">clearInterval</a></code></u> to do the cleanup operation. <p.new.line><pre>import { useEffect, useState } from &quot;react&quot;;<br><br>function App() {<br> const [enteredValue, setEnteredValue] = useState(&quot;&quot;);<br>useEffect(() =&gt; {<br> const interval = setTimeout(() =&gt; {<br>  if (enteredValue.length &gt; 0) {<br>  <em>// Make a fetch request in a real project<br>  </em>console.log(&quot;Send a request to a server...&quot;);<br> }<br>}, 1000);<br><br> return () =&gt; clearInterval(interval);<br>}, [enteredValue]);<br><br>const onChangedHandler = (e) =&gt; {<br> setEnteredValue(e.target.value);<br>};<br><br>return (<br> &lt;div style={{ textAlign: &quot;center&quot; }}&gt;<br>  &lt;input<br>   type={&quot;text&quot;}<br>   onChange={onChangedHandler}<br>   value={enteredValue}<br>   style={{ padding: &quot;10px&quot;, margin: &quot;40px&quot; }}<br>  /&gt;<br> &lt;/div&gt;<br>);<br>}<br><br>export default App;</pre><p>Output: <p.new.line><figure class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div><img alt="A photo of a console log." src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/63878e41c47f57dbbe7b7e2f_image3_af7f215fe7c98c3870012aeed1efd176_800.png"><div.new.line><figure.new.line><p>We can see from the output in the<a href="https://developer.mozilla.org/en-US/docs/Web/API/console" target="_blank" rel="noopener noreferrer"> <u>console</u></a> that the console log was produced four times, which indicates that I actually waited four times before inputting another character.<p.new.line><p>Make sure to test this out for yourself to see how it performs.<p.new.line><p>All I ask is that you start using this in your React project so that you discover its value.<p.new.line><h2 id="5fi9u">Conclusion<h2.new.line><p>I hope you had a good time reading this article! We learned how to utilize React <u><a href="https://developer.mozilla.org/en-US/docs/Web/API/setInterval" target="_blank" rel="noopener noreferrer">setInterval</a></u> and<a href="https://developer.mozilla.org/en-US/docs/Web/API/clearInterval" target="_blank" rel="noopener noreferrer"> <u>clearInterval</u></a> in class &amp; function-based components without crashes and errors, as well as how React renders a component and affects <code>setInterval</code>. Start making changes to your app so that it takes advantage of the strategies we discussed in this post. Setting up <code>setInterval</code> in your program allows you to add more features and ensures that everything runs s
