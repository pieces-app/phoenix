![](https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62ed6373eb86d367268d59e3_flutter3.png)
"flutter; dart; crypto"
# Create a Crypto Integration in Your Flutter Apps
> Wed Apr 05 2023 16:53:15 GMT+0000 (Coordinated Universal Time)
<p id="">Have you ever wondered how to accept crypto payments in your web app? Fear not! Iâ€™m going to show you how to integrate Metamask with Flutter web to accept Ethereum payments.<p.new.line><h2 id=""><strong id="">Metamask</strong><h2.new.line><p id="">Metamask is a cryptocurrency wallet that allows you to transact with the Ethereum blockchain. Itâ€™s simply your wallet available through their browser extensions and applications, which you can connect to sites that support payment via Metamask. It really is that simple, and thatâ€™s all you need to know for this article, but if youâ€™re interested in learning more, check out their <a href="https://metamask.io/" target="_blank" id="">official site</a>.<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62c89467a279df227bc27515_1*O-u58Uwm7dKHjIyt4jW6IQ.png" alt="https://miro.medium.com/max/698/1*O-u58Uwm7dKHjIyt4jW6IQ.png" id="" width="auto" height="auto" loading="auto"><div.new.line><figcaption id="">Metamask extension</figcaption><figure.new.line><h3 id=""><strong id="">Flutter Setup</strong><h3.new.line><p id="">The Flutter web setup should be quite easy. Just make sure that Flutter Web is enabled for the project; this shouldnâ€™t be an issue if youâ€™re already using Flutter 3.0. Simply create a new project You can title it Flutter Crypto App or Crypto Wallet Flutter:<p.new.line><p id="">â€<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1040px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1040px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cf13b0c26ae1fc078afe1e_raycast-untitled%20(3).png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://raman.pieces.cloud/?p=1a8d449cae" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><p id="">Done! Well, not really. You have your Flutter project setup though.<p.new.line><h3 id=""><strong id="">Required packages</strong><h3.new.line><p id="">Of course, hats off to the Flutter community for making our tasks easy! We will be using the following package to implement our Metamask flutter integration:<p.new.line><ul id=""><li id=""><a href="https://pub.dev/packages/flutter_web3" target="_blank" id="">flutter_web3</a><li.new.line><li id=""><a href="https://pub.dev/packages/provider" target="_blank" id="">provider</a><li.new.line><ul.new.line><p id="">And thatâ€™s it! Thatâ€™s pretty much all you need to get into the world of Web3 via Flutter3.<p.new.line><h3 id=""><strong id="">â€Coding</strong><h3.new.line><p id="">Ready? Here we go!<p.new.line><p id="">First, we will be setting up our provider for Metamask. Start here:<p.new.line><h5 id=""><strong id="">Creating the Provider Class | Create Crypto Wallet</strong></h5><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1040px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1040px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cc2da46cdaeb96d5cb6c84_raycast-untitled.png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://raman.pieces.cloud/?p=c4df41b737" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><p id="">Weâ€™ll be needing the following variables to manage various scenarios:<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1290px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1290px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cc2dd17ad9ae286542d3b4_raycast-untitled%20(1).png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://georgiad.pieces.cloud/?p=fd024e9c77" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><p id="">Donâ€™t worry! Iâ€™ll explain all of this!<p.new.line><ol id=""><li id="">currentChain â†’ We set this variable to -1 so that we do not immediately connect to a chain when the wallet connects. <li.new.line><li id="">currentAddress â†’ The present address of our Metamask.<li.new.line><li id="">operatingChain â†’ The Ethereum chain weâ€™ll be operating on. For now, it will be test networks, so we set it to 4 (Rinkeby Test Network).<li.new.line><li id="">isEnabled â†’ Checks whether the browser supports Metamask.<li.new.line><li id="">isInOperatingChain â†’ A bool variable that tells, whether we are connected to the correct chain or not.<li.new.line><li id="">isConnected â†’ A state that shows whether Metamask has been connected or not.<li.new.line></ol><p id="">The code will be now like this:<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1840px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1840px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cc2ecf2ed81fc21797b47d_raycast-untitled%20(3).png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://raman.pieces.cloud/?p=03574fa520" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><h5 id=""><strong id="">Connecting Metamask</strong></h5><p id="">We will be making a function that connects to Metamask once the following requirements are achieved:<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1182px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1182px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cc2f29e23f79354dc94a4a_raycast-untitled%20(4).png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://georgiad.pieces.cloud/?p=3fad43ab12" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><p id="">Let me break it down for you:<p.new.line><ol id=""><li id="">Check if Web3 is enabled on the browser<li.new.line><li id="">Get the accounts on Ethereum<li.new.line><li id="">If the accounts are not empty, get the first address<li.new.line><li id="">Get the ID of the current chain.<li.new.line></ol><h4 id=""><strong id="">Initializing Metamask</strong><h4.new.line><p id="">To initialize, we need to clear the currentAddress and reset the currentChain for two conditions every time:<p.new.line><ol id=""><li id="">If the account changed<li.new.line><li id="">If the chain itself changed<li.new.line></ol><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1040px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1040px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cf1494e8a04db318d2ab85_raycast-untitled%20(6).png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://raman.pieces.cloud/?p=91434bab68" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><p id="">Weâ€™re done with one â€œ3â€â€” the Web3 part. Now itâ€™s time for Flutter3.<p.new.line><h5 id=""><strong id="">Connecting Everything</strong></h5><p id="">Put the providers in the MultiProvider as we always do, but this time simply call the init() method that we wrote above.<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1382px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1382px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cc2fd33c60ffd74b085314_raycast-untitled%20(6).png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://raman.pieces.cloud/?p=4e7444bab2" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><p id="">Now, weâ€™ll make a button to start connecting to Metamask with conditions.<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:703px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="703px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cc303d8c00d25b4ef30e0d_raycast-untitled%20(4).svg" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://raman.pieces.cloud/?p=6813468f91" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><p id="">Sadly, Metamask doesnâ€™t work in debug mode, so you have to run the web server for Flutter web and visit the URL.<p.new.line><p id="">In case you want to hot reload/restart, after pressing â€œrâ€ in the terminal, make sure to reload the web browser yourself.<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-fullwidth" style="max-width:1040px" data-rt-type="image" data-rt-align="fullwidth" data-rt-max-width="1040px"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62cc307187e915240186f60a_raycast-untitled%20(7).png" loading="lazy" id="" width="auto" height="auto"><div.new.line><figcaption id=""><a href="https://raman.pieces.cloud/?p=0010488fac" target="_blank" id="">Save to Pieces</a></figcaption><figure.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62c8946737aca104629f1218_1*lE6GKmaFtYEZO-ZdoJaV_w.png" alt="https://miro.medium.com/max/1180/1*lE6GKmaFtYEZO-ZdoJaV_w.png" id="" width="auto" height="auto" loading="auto"><div.new.line><figure.new.line><p id="">And thatâ€™s all! ğŸ˜€ Both of our â€œ3sâ€ are together and the combined effect will look something like this!<p.new.line><figure id="" class="w-richtext-figure-type-image w-richtext-align-center" data-rt-type="image" data-rt-align="center"><div id=""><img src="https://uploads-ssl.webflow.com/6143afec68f555387049efb3/62c89467d36ebc186adb37ef_1*gPnJr8WDM22pk4PQhkwGVQ.gif" alt="https://miro.medium.com/max/1400/1*gPnJr8WDM22pk4PQhkwGVQ.gif" id="" width="auto" height="auto" loading="auto"><div.new.line><figure.new.line><p id="">Metamask in Flutter web ğŸ”¥<p.new.line><p id="">Yay!! You did it. I hope youâ€™ve learned something. Make sure to check out other articles on Flutter by exploring the blog.<p.new.line><p id=""><strong id="">ğŸ’» GitHub Repo</strong> â†’ <a href="https://github.com/mhmzdev/flutter-metamask" target="_blank" id="">https://github.com/mhmzdev/flutter-metamask</a><p.new.line><p id="">â€<p.new.line><h4 id=""><strong id="">An Easier Way to Save Your Flutter Snippets | </strong><a href="https://code.pieces.app/plugins"><strong id="">Pieces for Developers</strong></a><h4.new.line><p>Developing Flutter applications ca
